<job-header></job-header>

<section class="content" [class.big]=" app.size == 'big' ">
  <job-left *ngIf=" app.size == 'big' "></job-left>
  <section class="center">
    <nav class="search-option">
      <button type="button" class="btn btn-secondary btn-sm" (click)="onClickProfession()">Profession</button>
      <button type="button" class="btn btn-primary btn-sm" (click)="onClickLocation()">Location</button>
      <button type="button" class="btn btn-primary btn-sm" (click)="onClickMore()">More Option</button>
    </nav>

          <nav class="search-form" *ngIf=" (searchBy | json) != '{}' ">

            <div class="row-container" *ngIf=" searchBy.more ">
              <label class="text">Gender</label>
              <div class="input">
                <label class="form-check-inline">
                  <input type="checkbox" name="genderRadio" id="male" [(ngModel)]="query.male" (change)="search()"> Male
                </label>
                <label class="form-check-inline">
                  <input type="checkbox" name="genderRadio" id="female" [(ngModel)]="query.female" (change)="search()"> Female
                </label>
              </div>
            </div>

            <div class="row-container" *ngIf=" searchBy.more ">
              <label class="text" for="workExperience">Experience</label>
              <div class="input">
                <select class="form-control" id="workExperience" name="workExperience" [(ngModel)]="query.int_1" (change)="search()">
                  <option value="all">All</option>
                  <option value="0">No Work Experience</option>
                  <option *ngFor="let number of numbers" [value]="number">{{number}} years</option>
                </select>
              </div>
            </div>

            <div class="row-container" *ngIf=" searchBy.profession ">
              <label class="text"  for="workProfession">Profession</label>
              <div class="input">
                <select class="form-control" id="workProfession" name="workProfession" [(ngModel)]="query.sub_category" (change)="search()">
                  <option value="all">All</option>
                  <option value="housemaid">House Maid</option>
                  <option value="driver">Driver</option>
                </select>
              </div>
            </div>

            <div class="row-container" *ngIf=" searchBy.location ">
              <label class="text">Province</label>
              <div class="input">
                <select class="form-control" id="searchByProvince" name="province" [(ngModel)]="query.varchar_2" (change)="onClickProvince()">
                  <option value="all">All</option>
                  <option *ngFor="let province of provinces" [value]="province">{{province}}</option>
                </select>
              </div>
            </div>

            <div class="row-container" *ngIf="showCities && searchBy.location">
              <label class="text" *ngIf="showCities">City</label>
              <div class="input">
                <select class="form-control" id="searchByCities" name="city" [(ngModel)]="query.varchar_3" (change)="search()">
                  <option value="all">All</option>
                  <option *ngFor="let key of cityKeys" [value]="key">{{cities[key]}}</option>
                </select>
              </div>
            </div>

            <div class="row-container" *ngIf=" searchBy.more ">
              <label class="text">Age Range</label>
              <div class="input">
                <label class="range text">Min</label>
                <div class="range input">
                  <select class="form-control" id="searchByMinAge" name="minAge" [(ngModel)]="minAgeSelected" (change)="minRangeChange()">
                    <option [value]="minAge">{{minAge}}</option>
                    <option *ngFor="let min of minAgeRange" [value]="min+minAge">{{min+minAge}}</option>
                  </select>
                </div>
                <label class="range text">Max</label>
                <div class="range input">
                  <select class="form-control" id="searchByMaxAge" name="maxAge" [(ngModel)]="maxAgeSelected" (change)="maxRangeChange()">
                    <option *ngFor="let max of maxAgeRange" [value]="max+betweenAge">{{max+betweenAge}}</option>
                    <option [value]="maxAge">{{maxAge}}</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="row-container" *ngIf=" searchBy.more ">
              <label for="name" class="text">Name</label>
              <div class="input">
                <input class="form-control" type="text" id="name"  [(ngModel)]="query.name" (keyup)="onChange()" placeholder="Input Name...">
              </div>
            </div>

            <i class="close fa fa-times" (click)=" searchBy = {} "></i>
          </nav>

          <div *ngIf=" pages?.length " class="search-result">
            <div class="search-info">
              <span>Searching:</span>
              <span *ngIf="query.sub_category">{{query.sub_category}} job with </span>
              <span>Age between {{ minAgeSelected }} and {{ maxAgeSelected }}</span>
              <span *ngIf="query.male">and Male</span>
              <span *ngIf="query.female">and Female</span>
              <span *ngIf="query.int_1 != 'all'">and {{query.int_1}} year of experience</span>
              <span *ngIf="query.varchar_2 != 'all'">and province "{{query.varchar_2}}"</span>
              <span *ngIf="query.varchar_3 != 'all' && query.varchar_2 != query.varchar_3">and city "{{query.varchar_3}}"</span>
              <span *ngIf="query.name">and name like "{{query.name}}"</span>
            </div>

            <job-listing
                    [pages]="pages" [root]="pages"
                    [login]="login"
                    [mode] =" 'search' "
            ></job-listing>

          </div><!--/.pages.container-->

          <div [class.active]=" ! noMorePosts " class="no-more-posts in-page-loading"><i class="fa fa-spinner fa-spin"></i> Loading ...</div>
          <div [class.active]=" noMorePosts " class="no-more-posts">No more posts</div>


</section><!--/.center-->
<job-right *ngIf=" app.size == 'big' "></job-right>
</section><!--/section.content-->
